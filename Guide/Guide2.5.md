Guide 2.5 Lists4 Study Guide

## 概述

**列表与数组**我们`DLList`有一个缺点。获取第 i 个项目很慢；我们必须从头或尾开始扫描列表中的每个项目，直到我们到达第 i 个项目。然而，对于一个名为 的数组`A`，我们可以使用括号表示法快速访问第 i 个项目`A[i]`。因此，我们的目标是实现一个带有数组的列表。

**AList**将`AList`具有与我们相同的 API `DLList`，这意味着它将具有与`DLList`( `addLast()`、`getLast()`、`removeLast()`和`get(int i)`) 相同的方法。`AList`还将有一个`size`变量来跟踪其大小。

**AList 不**变量 我们的`AList`.

- `addLast`: 我们要添加的下一个项目将进入 position `size`。
- `getLast`: 我们要退回的物品在位置`size - 1`。
- `size`：列表中的项目数应该是`size`。

**实现 AList**每个`AList`都有一个`int[]`被调用的`items`.

- 对于`addLast`，我们将项目放入`items[size]`.
- 对于`getLast`，我们简单地返回`items[size - 1]`。
- 对于`removeLast`，我们只是递减`size`（我们不需要更改`items`）。因此，如果`addLast`接下来调用它，它会简单地覆盖旧值，因为大小减少了。**但是，最好在删除对象时将其清空，因为这样可以节省内存。** 请注意这些方法与不变量的关系有多密切。

**抽象**本课程的一个关键思想是实现细节可以对用户隐藏起来。例如，用户可能想要使用一个列表，但我们作为实现者，可以为他们提供列表的任何实现，只要它符合他们的规范。用户不应该了解我们列表的内部工作原理。

**数组调整大小**当数组太满时，我们可以调整数组的大小。但是，我们知道数组大小不能改变。相反，解决方案是创建一个更大尺寸的新数组，然后将旧数组值复制到新数组中。现在，我们拥有所有旧值，但我们有更多空间来添加项目。

**调整速度**在讲座视频中，我们开始每次达到数组大小限制时再将数组大小调整一倍。事实证明这非常慢，因为将数组复制到新数组意味着我们必须对每个项目执行复制操作。最糟糕的是，由于我们只调整了一个额外的框的大小，如果我们选择添加另一个项目，我们每次添加到数组时都必须再次执行此操作。

**提高调整大小性能**我们可以创建一个包含项目的新数组，而不是通过额外的框添加`size * FACTOR`，其中`FACTOR`可以是任何数字，例如 2。我们将在课程后面讨论为什么这很快。

**缩小数组大小**如果我们有一个 100 万长度的数组，但我们删除了数组的 990,000 个元素，会发生什么情况？好吧，类似地，如果我们达到 250,000 个元素，我们可以通过创建一个大小减半的数组来缩小我们的数组。同样，我们将在课程后面更严格地讨论这个问题。

**旁白：分解代码**有时，我们会编写大型方法来执行多项操作。更好的方法是将我们的大型方法分解为许多较小的方法。这样做的一个好处是我们可以分段测试我们的代码。

**泛型 AList**上一次，我们讨论了如何制作泛型`DLList`. 我们可以为`AList`. 但是我们发现我们在创建数组时出错了。我们的问题是 Java 中不允许使用泛型数组。相反，我们将更改这一行：

```java
items = new Item[100];
```

到：

```java
items = (Item[]) new Object[100];

//Item[] items = (Item[]) new Object[100];
```

这称为类型转换cast，我们将在未来了解它。

## 练习

### C级

1. [在这里](https://joshhug.gitbooks.io/hug61b/content/chap2/chap25.html)完成在线教科书中的练习 。

### B级

1. 我们没有触及到设计`AList`的`addFirst`方法. 想想你在编写`addFirst`方法时会遇到的一些问题，并想出一些潜在的解决方案。如果你认为你有一个好的，写出来。

   ```java
   // 没有想到什么好方法 唯一想到的就是：
   System.arraycopy(aList, 0, a, 1, aList.length);
   a[0] = n;
   aList = a;
   ```

2. 从这张[幻灯片做额外的问题](https://docs.google.com/presentation/d/1LGQeMHb8-HFKdvJi5nGKRIPZt4on18fZe-cIyTJv8_4/edit#slide=id.g1c42a46f23_4_396)