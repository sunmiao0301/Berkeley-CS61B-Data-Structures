## Reading 11.2

# B-trees / 2-3trees / 2-3-4 trees

**BST 的问题是我们总是在叶节点处插入。这就是导致高度增加的原因。**

以下面这棵漂亮的平衡树为例：

当我们开始插入节点时，我们可能会破坏平衡结构。所以，让我们想出一种在添加新节点时保持树平衡的方法！
![](https://raw.githubusercontent.com/sunmiao0301/Public-Pic-Bed/main/0215treebecomeugly.png)

**疯狂的想法**：让我们永远不要添加叶节点！当我们插入时，让我们添加到当前叶节点。这样，高度永远不会增加。

但是，您能看到这种插入方案的潜在问题吗？如果我们搜索 19，那么我们将向下遍历到包含它的节点，我们仍然必须像查看数组一样查看该节点才能找到第 19 个元素。这将再次导致运行时N！

![](https://raw.githubusercontent.com/sunmiao0301/Public-Pic-Bed/main/0215tobealist.png)

**解决方案**：设置单个节点中的元素数量限制。假设是 4。如果我们需要在节点已经有 4 个元素的情况下添加一个新元素，我们会将节点分成两半。

请注意，现在 15-17 节点现在有 3 个子节点，每个子节点小于、介于或大于 15 和 17。通过保持子节点排序，我们可以继续使用二分搜索。

![](https://raw.githubusercontent.com/sunmiao0301/Public-Pic-Bed/main/0215btrees.png)

通过在中间分裂节点，我们保持完美的平衡！这些树称为**B 树**或**2-3-4/2-3 树**。2-3-4 和 2-3 是指每个节点可以拥有的子节点数。

因此，一棵 2-3-4 树可以有 2、3 或 4 个子节点，而 2-3 树可以有 2 或 3 个。

这意味着当 2-3-4 树有 3 个节点，并且还要再加一个节点的时候，将会分裂。2-3棵树在它们有2个节点，并还要再加1个节点的时候分裂。

#### 插入过程

将节点添加到 2-3-4 树的过程是：

1. 我们仍然总是插入到叶子节点中，所以取你要插入的节点，沿着树向下遍历，根据要插入的节点是否大于或小于每个节点中的项来左右遍历.
2. 将节点添加到叶子节点后，如果新节点有4个节点，则弹出**左中节点**并相应地重新排列子节点。
3. **如果这导致父节点有 4 个节点，则再次弹出中间的左节点，相应地重新排列子节点。**
4. **重复此过程，直到父节点可以容纳或您到达根节点。**

对于 **2-3 树**，除了在 3 元素节点中向上推**中间节点**外，执行相同的过程。

## 一言蔽之，2-3-4树，它是一种多叉树，它的每个节点最多有四个子节点和三个数据项。



如果您想要更多练习，请完成这些[幻灯片中的练习](https://docs.google.com/presentation/d/1zhQDvbcDZ9RJgJl0bmqwFFlHP8ExbDFo36Q9ZWH9EgU/edit#slide=id.g508ece10b0_1_584)